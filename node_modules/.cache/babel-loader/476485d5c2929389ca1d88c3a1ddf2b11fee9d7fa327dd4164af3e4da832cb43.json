{"ast":null,"code":"import _toConsumableArray from\"/Users/desireelagerquist/Documents/Coding/BCS/projects/thepantryapp/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/desireelagerquist/Documents/Coding/BCS/projects/thepantryapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/desireelagerquist/Documents/Coding/BCS/projects/thepantryapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/desireelagerquist/Documents/Coding/BCS/projects/thepantryapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useEffect,useState}from\"react\";import Recipe from'../components/Recipe.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function YourRecipes(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),recipes=_useState2[0],setRecipes=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),ingredients=_useState4[0],setIngredients=_useState4[1];// const [getCooking, setGetCooking] = useState([])\n// const [letsShop, setLetsShop] = useState([])\n//put user to state \n//in useEffect keep track of state with pantry\n//rendering recipes.js component passing pantry through props \nvar callToAPI=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var test,url,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;test=ingredients.filter(function(ing){return ing.check===true;}).map(function(item,i){return item.name;});console.log(test);url=\"https://api.edamam.com/api/recipes/v2?type=public&beta=true&q=\".concat(test,\"&app_id=\").concat(process.env.REACT_APP_EDAMAM_APP_ID,\"&app_key=\").concat(process.env.REACT_APP_EDAMAM_APP_KEY);_context.next=6;return axios.get(url,{headers:{'Origin':'https://api.edamam.com/api/recipes/v2?type=public&beta=true&q=${test}&app_id=${process.env.REACT_APP_EDAMAM_APP_ID}&app_key=${process.env.REACT_APP_EDAMAM_APP_KEY}'}});case 6:res=_context.sent;console.log(res);setRecipes(res.data.hits);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 14:case\"end\":return _context.stop();}},_callee,null,[[0,11]]);}));return function callToAPI(){return _ref.apply(this,arguments);};}();useEffect(function(){callToAPI();},[]);// useEffect(() => {\n//     if (recipes.length > 0 && ingredients.length > 0) {\n//         let tempGetCooking = [], tempLetsShop = []\n//         recipes.forEach((recipe, i) => {\n//             if (props.user.pantry.length === recipe.recipe.ingredients.length) {\n//                 tempGetCooking.push(recipe[i])\n//             } else {\n//                 tempLetsShop.push(recipe[i])\n//             }\n//         })\n//         setGetCooking(tempGetCooking)\n//         setLetsShop(tempLetsShop)\n//     }\n// }, [recipes, ingredients])\nuseEffect(function(){var _props$user;var ingredientsMap=(_props$user=props.user)===null||_props$user===void 0?void 0:_props$user.pantry.map(function(ing,i){return{check:false,name:ing};});setIngredients(ingredientsMap);},[props]);var handleChange=function handleChange(i){var copy=_toConsumableArray(ingredients);copy[i].check=!copy[i].check;setIngredients(copy);};return/*#__PURE__*/_jsxs(\"div\",{className:\"yourrecipesmaindiv\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Your Recipes\"}),/*#__PURE__*/_jsx(\"ul\",{children:ingredients===null||ingredients===void 0?void 0:ingredients.map(function(item,i){return/*#__PURE__*/_jsxs(\"li\",{children:[item.name,/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:item.check,onChange:function onChange(){return handleChange(i);}})]},i);})}),/*#__PURE__*/_jsx(\"button\",{onClick:callToAPI,children:\"Search\"}),/*#__PURE__*/_jsx(\"div\",{className:\"reciperesults\",children:recipes.map(function(recipe,i){return/*#__PURE__*/_jsx(Recipe,{user:props.user,updateUser:props.updateUser,recipe:recipe,isLoggedIn:props.isLoggedIn},recipe.recipe.url);})}),/*#__PURE__*/_jsx(\"div\",{})]});}","map":{"version":3,"names":["axios","useEffect","useState","Recipe","jsx","_jsx","jsxs","_jsxs","YourRecipes","props","_useState","_useState2","_slicedToArray","recipes","setRecipes","_useState3","_useState4","ingredients","setIngredients","callToAPI","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","test","url","res","wrap","_callee$","_context","prev","next","filter","ing","check","map","item","i","name","console","log","concat","process","env","REACT_APP_EDAMAM_APP_ID","REACT_APP_EDAMAM_APP_KEY","get","headers","sent","data","hits","t0","error","stop","apply","arguments","_props$user","ingredientsMap","user","pantry","handleChange","copy","_toConsumableArray","className","children","type","checked","onChange","onClick","recipe","updateUser","isLoggedIn"],"sources":["/Users/desireelagerquist/Documents/Coding/BCS/projects/thepantryapp/src/views/YourRecipes.js"],"sourcesContent":["\nimport axios from \"axios\"\nimport { useEffect, useState } from \"react\"\nimport Recipe from '../components/Recipe.js'\n\nexport default function YourRecipes(props) {\n\n\n    const [recipes, setRecipes] = useState([])\n    const [ingredients, setIngredients] = useState([])\n    // const [getCooking, setGetCooking] = useState([])\n    // const [letsShop, setLetsShop] = useState([])\n\n    //put user to state \n    //in useEffect keep track of state with pantry\n    //rendering recipes.js component passing pantry through props \n    const callToAPI = async () => {//receives keywords \n        try {\n            const test = ingredients.filter(ing => ing.check === true).map((item, i) => item.name)\n            console.log(test)\n            const url = `https://api.edamam.com/api/recipes/v2?type=public&beta=true&q=${test}&app_id=${process.env.REACT_APP_EDAMAM_APP_ID}&app_key=${process.env.REACT_APP_EDAMAM_APP_KEY}`\n            const res = await axios.get(url, {\n                headers: {'Origin': 'https://api.edamam.com/api/recipes/v2?type=public&beta=true&q=${test}&app_id=${process.env.REACT_APP_EDAMAM_APP_ID}&app_key=${process.env.REACT_APP_EDAMAM_APP_KEY}'}\n            })\n            console.log(res)\n            setRecipes(res.data.hits)\n\n\n        } catch (err) {\n            console.error(err)\n        }\n\n    }\n\n    useEffect(() => {\n        callToAPI();\n    }, [])\n\n    // useEffect(() => {\n    //     if (recipes.length > 0 && ingredients.length > 0) {\n    //         let tempGetCooking = [], tempLetsShop = []\n    //         recipes.forEach((recipe, i) => {\n    //             if (props.user.pantry.length === recipe.recipe.ingredients.length) {\n    //                 tempGetCooking.push(recipe[i])\n    //             } else {\n    //                 tempLetsShop.push(recipe[i])\n    //             }\n    //         })\n    //         setGetCooking(tempGetCooking)\n    //         setLetsShop(tempLetsShop)\n    //     }\n\n\n    // }, [recipes, ingredients])\n\n    useEffect(() => {\n        const ingredientsMap = props.user?.pantry.map((ing, i) => ({ check: false, name: ing }))\n        setIngredients(ingredientsMap);\n    }, [props])\n\n    const handleChange = (i) => {\n        const copy = [...ingredients]\n        copy[i].check = !copy[i].check\n        setIngredients(copy)\n    }\n\n    return <div className='yourrecipesmaindiv'>\n\n        <h1>Your Recipes</h1>\n        <ul>\n            {ingredients?.map((item, i) => {\n                return <li key={i}>\n                    {item.name}\n                    <input type='checkbox' checked={item.check} onChange={() => handleChange(i)} />\n                    \n                </li>\n\n            })}\n        </ul>\n        <button onClick={callToAPI}>Search</button>\n\n        <div className=\"reciperesults\">\n            {recipes.map((recipe, i) => <Recipe user={props.user} updateUser={props.updateUser}\n                recipe={recipe} isLoggedIn={props.isLoggedIn} key={recipe.recipe.url} />)}\n        </div>\n\n        <div>\n\n        </div>\n    </div>\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}